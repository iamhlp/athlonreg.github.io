---
layout:     post
title:      DSDT SSDT简单提取修复
date:       2017-08-30
author:     athlonreg
header-img: img/Mac.jpg
catalog: true
tags:
    - DSDT
    - SSDT
    - 编译
---

# 
首先在CLOVER引导界面按F4或者FN+F4提取原始表单，然后进入Mac，利用Clover Configurator挂载ESP分区，提取的表单就在/EFI/CLOVER/ACPI/origin,将origin整个拷贝到桌面，并删除origin中除DSDT SSDT以外的所有文件
然后下载要用到的工具
iasl：https://bitbucket.org/RehabMan/acpica/downloads/
MaciASL：链接:http://pan.baidu.com/s/1pKAksR5  密码:nxyr
将iasl放到/usr/bin

![图片 1](/images/%E5%9B%BE%E7%89%87%201-1.png)

![图片 2](/images/%E5%9B%BE%E7%89%87%202-2.png)

然后安装MaciASL并添加补丁源：

![图片 3](/images/%E5%9B%BE%E7%89%87%203-1.png)

![图片 4](/images/%E5%9B%BE%E7%89%87%204-1.png)

Rehabman补丁源：
Name：RehabMan Laptop 
URL：http://raw.github.com/RehabMan/Laptop-DSDT-Patch/master

打开终端，输入：cd ~/Desktop/origin 回车

![图片 5](/images/%E5%9B%BE%E7%89%87%205-1.png)

然后iasl –da –dl *.aml 回车

![图片 6](/images/%E5%9B%BE%E7%89%87%206-1.png)

![图片 7](/images/%E5%9B%BE%E7%89%87%207-1.png)

这时打开桌面的origin文件夹会发现多出了很多.dsl文件，我们要用到的就是这些文件

![图片 8](/images/%E5%9B%BE%E7%89%87%208-1.png)

先不要急，终端继续执行rm –rf *.aml 回车
然后执行 rm –rf *x.dsl 回车，这时就会发现终端只剩下了不带x的dsl文件

![图片 9](/images/%E5%9B%BE%E7%89%87%209-1.png)

然后用MaciASL打开DSDT.dsl

![图片 10](/images/%E5%9B%BE%E7%89%87%2010-1.png)

点Compile编译后会弹出错误的窗口：

![图片 11](/images/%E5%9B%BE%E7%89%87%2011-1.png)

点这些错误就会定位到错误的代码位置
这里说一下常见的错误修复方法
1、PARSEOP_ZERO错误，定位后会发现一堆zero代码，直接将他们删掉即可
2、Unexpected ‘}’错误：定位后是这样：

![图片 12](/images/%E5%9B%BE%E7%89%87%2012-1.png)

我们会发现这个错误位于ADBG的方法下，这时只需打个补丁即可：
点Patch

![图片 13](/images/%E5%9B%BE%E7%89%87%2013-1.png)

找到Fix ADBG Error点一下，然后Apply应用即可，这时我们会发现再编译就没有错误了(警告可以不用管)，然后保存成aml文件

![图片 14](/images/%E5%9B%BE%E7%89%87%2014-1.png)

![图片 15](/images/%E5%9B%BE%E7%89%87%2015-1.png)

![图片 16](/images/%E5%9B%BE%E7%89%87%2016-1.png)

Save即可，其他SSDT文件也是一样的操作

在修改完所有表单的错误并保存成aml格式后，将这些aml文件放到/EFI/CLOVER/ACPI/patched就可以了


